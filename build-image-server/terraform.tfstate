{
  "version": 4,
  "terraform_version": "0.14.5",
  "serial": 14,
  "lineage": "db2985ed-4e7b-2fa1-4db0-a67a580d4ef9",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "ibm_is_image",
      "name": "image",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "amd64",
            "checksum": "aa5cd57a167a16a3eb0659ab5acdeb9f23bb45dfef519c721b17814d5965f55a",
            "crn": "crn:v1:bluemix:public:is:au-syd:a/811f8abfbd32425597dc7ba40da98fa6::image:r026-23c4e123-33f5-4bc0-8ad4-63310be40c17",
            "encryption": "none",
            "encryption_key": null,
            "id": "r026-23c4e123-33f5-4bc0-8ad4-63310be40c17",
            "name": "ibm-centos-7-9-minimal-amd64-2",
            "os": "centos-7-amd64",
            "status": "available",
            "visibility": "public"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ibm_is_ssh_key",
      "name": "sshkey",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fingerprint": "SHA256:UCKAn5E2vG50yb/rSW3g6Qthlbi6mJPeFC257509aj4",
            "id": "r026-97079f45-b07b-414c-8e2f-13638c87ad83",
            "length": 2048,
            "name": "jonhall",
            "resource_controller_url": "https://cloud.ibm.com/vpc/compute/sshKeys",
            "resource_crn": "crn:v1:bluemix:public:is:au-syd:a/7a24585774d8b3c897d0c9b47ac48461::key:r026-97079f45-b07b-414c-8e2f-13638c87ad83",
            "resource_group_name": "cf3d539b37854a6ebf12ca4d5a8183c3",
            "resource_name": "jonhall",
            "type": "rsa"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ibm_is_subnet",
      "name": "subnet",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "available_ipv4_address_count": 250,
            "crn": "crn:v1:bluemix:public:is:au-syd-1:a/7a24585774d8b3c897d0c9b47ac48461::subnet:02h7-fde89eaf-c922-40f3-8cf3-2f5573822f64",
            "id": "02h7-fde89eaf-c922-40f3-8cf3-2f5573822f64",
            "identifier": null,
            "ipv4_cidr_block": "10.245.0.0/24",
            "ipv6_cidr_block": null,
            "name": "au-syd-1-default-subnet",
            "network_acl": "r026-59fbe485-3052-4b75-99a0-f9fa3b92c139",
            "public_gateway": "r026-54c9a752-16c8-4453-a1f9-c01ffe6a3a61",
            "resource_controller_url": "https://cloud.ibm.com/vpc-ext/network/subnets",
            "resource_crn": "crn:v1:bluemix:public:is:au-syd-1:a/7a24585774d8b3c897d0c9b47ac48461::subnet:02h7-fde89eaf-c922-40f3-8cf3-2f5573822f64",
            "resource_group": "cf3d539b37854a6ebf12ca4d5a8183c3",
            "resource_group_name": "default",
            "resource_name": "au-syd-1-default-subnet",
            "resource_status": "available",
            "status": "available",
            "tags": [],
            "total_ipv4_address_count": 256,
            "vpc": "r026-9fda67e7-393f-4e8d-babc-159c655255cb",
            "zone": "au-syd-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ibm_is_vpc",
      "name": "vpc",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "classic_access": false,
            "crn": "crn:v1:bluemix:public:is:au-syd:a/7a24585774d8b3c897d0c9b47ac48461::vpc:r026-9fda67e7-393f-4e8d-babc-159c655255cb",
            "cse_source_addresses": [
              {
                "address": "10.223.232.39",
                "zone_name": "au-syd-1"
              },
              {
                "address": "10.223.251.163",
                "zone_name": "au-syd-2"
              },
              {
                "address": "10.12.2.9",
                "zone_name": "au-syd-3"
              }
            ],
            "default_network_acl": "r026-59fbe485-3052-4b75-99a0-f9fa3b92c139",
            "default_routing_table": "r026-e0b1541e-b30d-4de5-81fd-cae1bf0b1541",
            "default_security_group": "r026-26faf209-a563-4a3c-8e05-b6621c90a08e",
            "id": "r026-9fda67e7-393f-4e8d-babc-159c655255cb",
            "name": "au-syd-default-vpc",
            "resource_controller_url": "https://cloud.ibm.com/vpc-ext/network/vpcs",
            "resource_crn": "crn:v1:bluemix:public:is:au-syd:a/7a24585774d8b3c897d0c9b47ac48461::vpc:r026-9fda67e7-393f-4e8d-babc-159c655255cb",
            "resource_group": "cf3d539b37854a6ebf12ca4d5a8183c3",
            "resource_group_name": "default",
            "resource_name": "au-syd-default-vpc",
            "resource_status": "available",
            "security_group": [
              {
                "group_id": "r026-26faf209-a563-4a3c-8e05-b6621c90a08e",
                "group_name": "disburse-derailed-earache-unseemly",
                "rules": [
                  {
                    "code": 0,
                    "direction": "outbound",
                    "ip_version": "ipv4",
                    "port_max": 0,
                    "port_min": 0,
                    "protocol": "all",
                    "remote": "0.0.0.0/0",
                    "rule_id": "r026-d70447c8-c450-4d20-b6c8-63d841d259ab",
                    "type": 0
                  },
                  {
                    "code": 0,
                    "direction": "inbound",
                    "ip_version": "ipv4",
                    "port_max": 0,
                    "port_min": 0,
                    "protocol": "all",
                    "remote": "r026-26faf209-a563-4a3c-8e05-b6621c90a08e",
                    "rule_id": "r026-e21723a3-b23c-457e-9b1d-9511bed835c3",
                    "type": 0
                  },
                  {
                    "code": 0,
                    "direction": "inbound",
                    "ip_version": "ipv4",
                    "port_max": 0,
                    "port_min": 0,
                    "protocol": "all",
                    "remote": "24.252.32.71",
                    "rule_id": "r026-6d4b2af2-f3c6-4b7b-84cd-a33d480a9ce3",
                    "type": 0
                  },
                  {
                    "code": 0,
                    "direction": "inbound",
                    "ip_version": "ipv4",
                    "port_max": 0,
                    "port_min": 0,
                    "protocol": "all",
                    "remote": "67.11.194.135",
                    "rule_id": "r026-17d3cba3-6336-4a15-b73d-b1899fb92c05",
                    "type": 0
                  },
                  {
                    "code": 0,
                    "direction": "inbound",
                    "ip_version": "ipv4",
                    "port_max": 0,
                    "port_min": 0,
                    "protocol": "all",
                    "remote": "98.109.140.60",
                    "rule_id": "r026-fe8fca0e-87a9-44f4-a397-6c8016be9955",
                    "type": 0
                  },
                  {
                    "code": 0,
                    "direction": "inbound",
                    "ip_version": "ipv4",
                    "port_max": 0,
                    "port_min": 0,
                    "protocol": "all",
                    "remote": "70.117.184.229",
                    "rule_id": "r026-47f0a634-64d0-4f2f-8208-8a5952a6aaf9",
                    "type": 0
                  }
                ]
              }
            ],
            "status": "available",
            "subnets": [
              {
                "available_ipv4_address_count": 250,
                "id": "02h7-fde89eaf-c922-40f3-8cf3-2f5573822f64",
                "name": "au-syd-1-default-subnet",
                "status": "available",
                "total_ipv4_address_count": 256,
                "zone": "au-syd-1"
              },
              {
                "available_ipv4_address_count": 245,
                "id": "02i7-cd42bcfb-d54c-4dda-b7a1-3b98bedf2e23",
                "name": "au-syd-2-default-subnet",
                "status": "available",
                "total_ipv4_address_count": 256,
                "zone": "au-syd-2"
              }
            ],
            "tags": []
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ibm_resource_group",
      "name": "rg",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cf3d539b37854a6ebf12ca4d5a8183c3",
            "is_default": null,
            "name": "default"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "local_file",
      "name": "cloud-config",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "#cloud-config\npackage_update: true\npackage_upgrade: true\n\npackages:\n - lvm2\n\nruncmd:\n - sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config\"\n - yum -y install epel-release\n - yum -y install jq\n - yum -y install qemu-img\n - yum -y install s3fs-fuse\n - echo -e \"n\\np\\n1\\n\\n\\nt\\n8e\\n\\nw\\n\" | sudo fdisk /dev/vdd\n - sudo pvcreate /dev/vdd1\n - sudo vgextend /dev/vg_virt /dev/vdd1\n - sudo lvcreate -l 100%FREE /dev/vg_virt /dev/vdd1 --name lv_tmp\n - sudo mkfs.xfs  /dev/vg_virt/lv_tmp\n - sudo mkdir /mnt/cos\n - sudo echo \"/dev/mapper/vg_virt-lv_tmp /tmp xfs defaults 0 0\" \u003e\u003e /etc/fstab\n - sudo echo \"encrypted-images /mnt/cos fuse.s3fs _netdev,allow_other,url=https://s3.direct.us-south.cloud-object-storage.appdomain.cloud 0 0\" \u003e\u003e /etc/fstab\n - sudo mount -a\n - sudo rpm --import https://repo.logdna.com/logdna.gpg\n - sudo yum -y install logdna-agent\n - sudo logdna-agent -s LOGDNA_APIHOST=api.us-east.logging.cloud.ibm.com\n - sudo logdna-agent -s LOGDNA_LOGHOST=logs.us-east.logging.cloud.ibm.com\n - sudo chkconfig logdna-agent on\n - sudo service logdna-agent start\n - curl -fsSL https://clis.cloud.ibm.com/install/linux | sh\n - cd /root\n - ibmcloud plugin install infrastructure-service -f\n - ibmcloud plugin install cloud-databases -f\n - wget https://github.com/IBM-Cloud/redli/releases/download/v0.5.2/redli_0.5.2_linux_amd64.tar.gz\n - tar zxvf redli_0.5.2_linux_amd64.tar.gz\n - chmod +x redli\n - sudo cp redli /usr/local/bin\n - rm redli_0.5.2_linux_amd64.tar.gz",
            "content_base64": "I2Nsb3VkLWNvbmZpZwpwYWNrYWdlX3VwZGF0ZTogdHJ1ZQpwYWNrYWdlX3VwZ3JhZGU6IHRydWUKCnBhY2thZ2VzOgogLSBsdm0yCgpydW5jbWQ6CiAtIHN1ZG8gc2VkIC1pICdzL15TRUxJTlVYPWVuZm9yY2luZyQvU0VMSU5VWD1wZXJtaXNzaXZlLycgL2V0Yy9zZWxpbnV4L2NvbmZpZyIKIC0geXVtIC15IGluc3RhbGwgZXBlbC1yZWxlYXNlCiAtIHl1bSAteSBpbnN0YWxsIGpxCiAtIHl1bSAteSBpbnN0YWxsIHFlbXUtaW1nCiAtIHl1bSAteSBpbnN0YWxsIHMzZnMtZnVzZQogLSBlY2hvIC1lICJuXG5wXG4xXG5cblxudFxuOGVcblxud1xuIiB8IHN1ZG8gZmRpc2sgL2Rldi92ZGQKIC0gc3VkbyBwdmNyZWF0ZSAvZGV2L3ZkZDEKIC0gc3VkbyB2Z2V4dGVuZCAvZGV2L3ZnX3ZpcnQgL2Rldi92ZGQxCiAtIHN1ZG8gbHZjcmVhdGUgLWwgMTAwJUZSRUUgL2Rldi92Z192aXJ0IC9kZXYvdmRkMSAtLW5hbWUgbHZfdG1wCiAtIHN1ZG8gbWtmcy54ZnMgIC9kZXYvdmdfdmlydC9sdl90bXAKIC0gc3VkbyBta2RpciAvbW50L2NvcwogLSBzdWRvIGVjaG8gIi9kZXYvbWFwcGVyL3ZnX3ZpcnQtbHZfdG1wIC90bXAgeGZzIGRlZmF1bHRzIDAgMCIgPj4gL2V0Yy9mc3RhYgogLSBzdWRvIGVjaG8gImVuY3J5cHRlZC1pbWFnZXMgL21udC9jb3MgZnVzZS5zM2ZzIF9uZXRkZXYsYWxsb3dfb3RoZXIsdXJsPWh0dHBzOi8vczMuZGlyZWN0LnVzLXNvdXRoLmNsb3VkLW9iamVjdC1zdG9yYWdlLmFwcGRvbWFpbi5jbG91ZCAwIDAiID4+IC9ldGMvZnN0YWIKIC0gc3VkbyBtb3VudCAtYQogLSBzdWRvIHJwbSAtLWltcG9ydCBodHRwczovL3JlcG8ubG9nZG5hLmNvbS9sb2dkbmEuZ3BnCiAtIHN1ZG8geXVtIC15IGluc3RhbGwgbG9nZG5hLWFnZW50CiAtIHN1ZG8gbG9nZG5hLWFnZW50IC1zIExPR0ROQV9BUElIT1NUPWFwaS51cy1lYXN0LmxvZ2dpbmcuY2xvdWQuaWJtLmNvbQogLSBzdWRvIGxvZ2RuYS1hZ2VudCAtcyBMT0dETkFfTE9HSE9TVD1sb2dzLnVzLWVhc3QubG9nZ2luZy5jbG91ZC5pYm0uY29tCiAtIHN1ZG8gY2hrY29uZmlnIGxvZ2RuYS1hZ2VudCBvbgogLSBzdWRvIHNlcnZpY2UgbG9nZG5hLWFnZW50IHN0YXJ0CiAtIGN1cmwgLWZzU0wgaHR0cHM6Ly9jbGlzLmNsb3VkLmlibS5jb20vaW5zdGFsbC9saW51eCB8IHNoCiAtIGNkIC9yb290CiAtIGlibWNsb3VkIHBsdWdpbiBpbnN0YWxsIGluZnJhc3RydWN0dXJlLXNlcnZpY2UgLWYKIC0gaWJtY2xvdWQgcGx1Z2luIGluc3RhbGwgY2xvdWQtZGF0YWJhc2VzIC1mCiAtIHdnZXQgaHR0cHM6Ly9naXRodWIuY29tL0lCTS1DbG91ZC9yZWRsaS9yZWxlYXNlcy9kb3dubG9hZC92MC41LjIvcmVkbGlfMC41LjJfbGludXhfYW1kNjQudGFyLmd6CiAtIHRhciB6eHZmIHJlZGxpXzAuNS4yX2xpbnV4X2FtZDY0LnRhci5negogLSBjaG1vZCAreCByZWRsaQogLSBzdWRvIGNwIHJlZGxpIC91c3IvbG9jYWwvYmluCiAtIHJtIHJlZGxpXzAuNS4yX2xpbnV4X2FtZDY0LnRhci5neg==",
            "filename": "./cloud-init.txt",
            "id": "d92324cff400a164f02bfb6713fac193210a375c"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ibm_is_instance",
      "name": "server1",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "ibm_is_volume",
      "name": "volume",
      "provider": "provider[\"registry.terraform.io/ibm-cloud/ibm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "capacity": 250,
            "crn": "crn:v1:bluemix:public:is:au-syd-1:a/7a24585774d8b3c897d0c9b47ac48461::volume:r026-34638c43-3897-4419-b965-0647a0aa8347",
            "encryption_key": null,
            "id": "r026-34638c43-3897-4419-b965-0647a0aa8347",
            "iops": 3000,
            "name": "tmp-volume",
            "profile": "10iops-tier",
            "resource_controller_url": "https://cloud.ibm.com/vpc-ext/storage/storageVolumes",
            "resource_crn": "crn:v1:bluemix:public:is:au-syd-1:a/7a24585774d8b3c897d0c9b47ac48461::volume:r026-34638c43-3897-4419-b965-0647a0aa8347",
            "resource_group": "cf3d539b37854a6ebf12ca4d5a8183c3",
            "resource_group_name": "default",
            "resource_name": "tmp-volume",
            "resource_status": "available",
            "status": "available",
            "tags": [],
            "timeouts": null,
            "zone": "au-syd-1"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.ibm_resource_group.rg"
          ]
        }
      ]
    }
  ]
}
